/*
* Available vars:
*   data - Contains a string representation of the file.
*          Contents of this variable will be written to the processed folder.
*   originalData - Copy of data. Contents of the variable will be written
*                  to the treated folder. Should not be edited.
*   filename - The original filename
*   outFilename - By default is the original filename. Change to determine
*                 out filename.
*   treatedFilename - By default is the original filename. Change to determine
*                     treated filename.
*/

// Make into jquery obj (and trim to avoid issues)
var xmlDoc = $.parseXML(data.trim()),
    $xml   = $(xmlDoc);

// Do some proessing
$xml.find("Logsheet").removeAttr("GUID");
$xml.find("Log").removeAttr("GUID");
$xml.find("Log").removeAttr("LOGSHEET_GUID");
$xml.find("Log").removeAttr("EVS_LOGSHEET_ID");
$xml.find("ClipLogAssociation").remove();
$xml.find("BackupTrains").remove();
$xml.find("Recorders").remove();
$xml.find("AssociatedClips").remove();


// Turn back into an XML string (caution might not work with namespaces)
data = (new window.XMLSerializer()).serializeToString($xml[0])